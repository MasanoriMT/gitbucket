@(active: String,
  repository: gitbucket.core.service.RepositoryService.RepositoryInfo,
  id: Option[String] = None,
  info: Option[Any] = None,
  error: Option[Any] = None)(body: Html)(implicit context: gitbucket.core.controller.Context)
@import context._
@import gitbucket.core.view.helpers._

@menuitem(path: String, name: String, label: String, count: Int = 0) = {
  <li @if(active == name){class="active"}>
    <a href="@url(repository)@path">
      @label
      @if(count > 0){
        <span class="badge">@count</span>
      }
    </a>
  </li>
}

<div class="headbar">
  <div class="container">
    @helper.html.information(info)
    @helper.html.error(error)
    <div class="pull-right">
      <a href="@url(repository)/commits/@encodeRefName(id.getOrElse(""))" class="header-link">
        <i class="octicon octicon-history"></i>
        @if(repository.commitCount > 10000){
          <strong>10000+</strong> commits
        } else {
          <strong>@repository.commitCount</strong> commits
        }
      </a>
      <a href="@url(repository)/branches" class="header-link" class="header-link">
        <i class="octicon octicon-git-branch"></i>
        <strong>@repository.branchList.length</strong> branches
      </a>
      <a href="@url(repository)/tags" class="header-link" class="header-link">
        <i class="octicon octicon-tag"></i>
        <strong>@repository.tags.length</strong> releases
      </a>
    </div>
    <div class="head">
      @helper.html.repositoryicon(repository, true)
      <a href="@url(repository.owner)">@repository.owner</a> / <a href="@url(repository)" class="strong">@repository.name</a>

      @defining(repository.repository){ x =>
        @if(repository.repository.originRepositoryName.isDefined){
          <div class="forked">
            forked from <a href="@path/@x.parentUserName/@x.parentRepositoryName">@x.parentUserName/@x.parentRepositoryName</a>
          </div>
        }
        @x.description.map { description =>
          <div class="normal muted" style="margin-left: 36px; font-size: 80%;">@detectAndRenderLinks(description)</div>
        }
      }
    </div>
    <ul class="nav nav-tabs">
      @menuitem(""       , "code"   , "Code")
      @menuitem("/issues", "issues" , "Issues", repository.issueCount)
      @menuitem("/pulls" , "pulls"  , "Pull Requests", repository.pullCount)
      @menuitem("/wiki"  , "wiki"   , "Wiki")
      @if(loginAccount.isDefined && (loginAccount.get.isAdmin || repository.managers.contains(loginAccount.get.userName))){
        @menuitem("/settings" , "settings" , "Settings")
      }
      @menuitem("/network/members", "fork", "Forks", repository.forkedCount)
    </ul>
  </div>
</div>
<div class="container body">
  @body
</div>
